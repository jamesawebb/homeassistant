# Cf. https://www.home-assistant.io/docs/automation/trigger/  
- id: night_doorbell
  alias: Doorbell illuminated
  trigger:
    platform: numeric_state
    entity_id: sun.sun
    value_template: "{{ state.attributes.elevation }}"
    below: 0
  action:
    entity_id: switch.button_illumination_relay
    service: switch.turn_on

- id: day_doorbell
  alias: Doorbell not illuminated
  trigger:
    platform: numeric_state
    entity_id: sun.sun
    value_template: "{{ state.attributes.elevation }}"
    above: 0
  action:
    entity_id: switch.button_illumination_relay
    service: switch.turn_off

- id: dingdong
  alias: Doorbell pressed
  trigger:
  - platform: state
    entity_id: binary_sensor.doorbell_press
    to: "on"
  action:
  - entity_id: switch.button_flicker
    service: switch.turn_on
  - service: hangouts.send_message
    data_template:
      target:
        - id: !secret hangouts_group
      message:
        - is_bold: false
          is_italic: false
          is_strikethrough: false
          text: >
            **Dingdong**:
            Someone is at the frontdoor
          parse_str: true     # Parse text as markdown
  - entity_id: media_player.house
    service: tts.google_translate_say
    data_template:
      message: Someone is at the front door
#   - service: persistent_notification.create
#     data:
#       message: Front doorbell pressed
#       title: Dingdong
